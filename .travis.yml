# CI Environment
dist: bionic

# Job Configurations
jobs:
  include:
    - language: python
      python: "3.9.6"
      addons:
        sonarcloud: 
          organization: swsnu
          token:
            secure: "E5Uk0QaclYH/7HNrqEzJ00zmNG4ATldo4pzVq1yMEOpgDGB3XxawkzgPqS9EnAcZqfXxG6F+BuhlKSEnM9O+nOScsTbEiJhbTgzZvyGYmSRzN7j8okQ5GDpLMJOpmagV1RpUKXDP8FODLmbaYn1/sKvMRST9oNcoITLXYhrkZi9dYvRnksSM6l2hkvrrlXhTz2wgyvIII8x578qo43kANa+2FWiEIXZfxjTe0lE3Jho+XXAkfgvsvEvMuaomTPonnQphOSLI/86qnIlcOcqeDDvcbb9g7kZSQTgwmBYAhAfkod+kecTiQ2X8P+D7oE7SCvCKCrVqYSvvhVHgBdOAj33n/xZFEYzmlQCpo0649/kGk3rtZ8kBpNRUp2ivShDkax+yIogQSFb4LPG2kth0AsFhZGQ+a76dYs/57XorCC1P1sJG8ZFzpoWV7sIen/NP5lqeosmzN3wgcsX9oVJ1araI6Fg/dEc9ulZYG0nC6muPa2TMRPVYlEz/XeR1BEsyVMsS7YfOVQYLE/m2bBMejDjuWNudFnCNOYFNF/1zd4px+8T7H6dMdDBhFPXUjdIrBOYsV20wrJizPCiLX4LFcPBfGeAT81Spy2b+CnIiWp2WRO0oV30j1YNlssLW13oICiomCk1OaHbWpRyWZnROSep+tTIh3PEb61JTSV5Xu9c="
      install:
        - cd backend
        - pip install -r requirements.txt
      script:
        - pylint **/*.py --load-plugins pylint_django
        - coverage run --source='.' manage.py test
        - coverage xml
        - cd .. && sonar-scanner
    - language: node_js
      node_js: 14
      install:
        - cd frontend
        - yarn install
      script:
        - ./node_modules/.bin/eslint src
        - yarn test --coverage --watchAll=false
